<div class="ng-dropdown-menu-wrapper"
     [style.width]="props.dropdown.menuWidth | px"
     [style.height]="props.dropdown.menuHeight | px"
     [style.right]="props.dropdown.positionRight()"
     [style.bottom]="props.dropdown.positionBottom()">
  <ul class="ng-dropdown-menu" (click)="$event.stopPropagation()">
    <ul *ngIf="config.filterable">
      <li class="ng-dropdown-search">
        <div class="ng-dropdown-input-group">
          <span class="ng-dropdown-input-group-addon" id="sizing-addon3">
            <i class="zmdi zmdi-search"></i>
          </span>
          <input type="text" class="ng-dropdown-input" placeholder="{{ config.translations.searchPlaceholder }}" aria-describedby="sizing-addon3" (keyup)="props.dropdown.filterKeyUp()" autofocus [(ngModel)]="props.dropdown.filterText">
          <span class="ng-dropdown-input-group-btn" *ngIf="props.dropdown.filterText">
            <button class="ng-dropdown-delete-button" type="button" (click)="props.dropdown.clearSearch()">
              <i class="zmdi zmdi-close-circle"></i>
            </button>
          </span>
        </div>
      </li>
      <li class="ng-dropdown-divider divider"></li>
    </ul>

    <ul *ngIf="props.dropdown.showSelectAll && config.multiSelectable && !config.loadOnScroll">
      <li class="ng-dropdown-item check-control check-control-check" (click)="props.dropdown.toggleAllSelected()">
        <input type="checkbox" class="ng-dropdown-checkbox-input" [(ngModel)]="props.dropdown.allSelected" />
        <span>{{ config.translations.selectAllPlaceholder }}</span>
      </li>
      <li class="ng-dropdown-divider divider"></li>
    </ul>

    <ul class="ng-dropdown-item-container" [class.ng-milti-selectable]="config.multiSelectable" [style.height]="props.dropdown.menuHeight - 135 | px" (scroll)="config.loadOnScroll ? props.dropdown.checkScrollPosition($event) : null" >
      <ng-container *ngIf="config.groupByField">
        <ng-container *ngFor="let groupedItem of props.dropdown._groupedItems">
          <li *ngIf="props.dropdown.hasVisibleItems(groupedItem.items)" class="ng-dropdown-group-heading">{{groupedItem.groupName}}</li>
          <ng-container *ngFor="let option of groupedItem.items">
            <li (click)="props.dropdown.setSelected(option)" *ngIf="option.filter" [class.disabled]="option.disabled" [class.ng-item-selected]="props.dropdown.isSelected(option)">
              <a role="menuitem">
                <input type="checkbox" class="ng-dropdown-checkbox-input" [checked]="props.dropdown.isSelected(option)" [disabled]="option.disabled" *ngIf="config.multiSelectable"/>
                <span>{{option.text}}</span>
              </a>
            </li>
          </ng-container>
        </ng-container>
      </ng-container>
      <ng-container *ngIf="!config.groupByField">
        <ng-container *ngFor="let option of props.dropdown._items">
          <li (click)="props.dropdown.setSelected(option)" *ngIf="option.filter" [class.ng-item-selected]="props.dropdown.isSelected(option)">
            <a role="menuitem">
              <input type="checkbox" class="ng-dropdown-checkbox-input" [checked]="props.dropdown.isSelected(option)" [disabled]="option.disabled" *ngIf="config.multiSelectable"/>
              <span>{{option.text}}{{option.disabled}}</span>
            </a>
          </li>
        </ng-container>
      </ng-container>
      <li *ngIf="!props.dropdown.isLoading && !props.dropdown.currentItemCount" class="ng-dropdown-item empty">
        {{config.translations.searchEmptyResult}}
      </li>
      <li *ngIf="props.dropdown.isLoading">
        Loading...
      </li>
    </ul>
  </ul>
</div>
