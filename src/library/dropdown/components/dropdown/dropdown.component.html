<div #dropdownElement class="ng-dropdown" (clickOutside)="closeDropdown()">
  <button  type="button" class="ng-dropdown-toggle" (click)="toggleDropdown(dropdownElement)" [disabled]="dataStateService.disabled">
    <ng-container *ngIf="config.multiSelectable">
      <ng-container *ngIf="!wrapSelectedOptions">
         <span class="ng-dropdown-selected-value" *ngFor="let item of dataStateService.selectedOptions; let index = index"
               [style.max-width]="config.multiSelectOptionMaxWidth | px"
               [class.ng-dropdown-option-close-enabled]="config.showSelectedOptionRemoveButton">
          {{ config.getDisplayText(item) }}
           <i class="zmdi zmdi-close" *ngIf="config.showSelectedOptionRemoveButton"
              (click)="onSelectOptionRemove($event, index)"></i>
        </span>
      </ng-container>
      <span class="ng-dropdown-selected-item" *ngIf="wrapSelectedOptions">
        {{ wrappedSelectedOptions }}
      </span>
      <span class="ng-dropdown-selected-placeholder" *ngIf="!dataStateService.selectedOptions.length">
        {{ config.translations.selectPlaceholder }}
      </span>
    </ng-container>
    <ng-container *ngIf="!config.multiSelectable">
      <span class="ng-dropdown-selected-item" *ngIf="dataStateService.selectedOption">
        {{ config.getDisplayText(dataStateService.selectedOption) }}
      </span>
      <span class="ng-dropdown-selected-placeholder" *ngIf="!dataStateService.selectedOption">
        {{ config.translations.selectPlaceholder }}
      </span>
    </ng-container>
    <span class="ng-dropdown-input-group-btn" [hidden]="!hasSelectedItems" *ngIf="config.showClearSelectionButton">
      <button class="ng-dropdown-delete-button" type="button" (click)="clearSelectedOptions($event)">
        <i class="zmdi zmdi-close"></i>
      </button>
    </span>
    <span class="ng-dropdown-down-arrow" *ngIf="!dataStateService.dataLoading">
      <i class="zmdi zmdi-chevron-down"></i>
    </span>
    <span class="ng-dropdown-loading" [hidden]="!dataStateService.dataLoading">
      <div class="ng-dropdown-loading-animation" *ngIf="!loadingSpinnerTemplate"></div>
      <div *ngIf="loadingSpinnerTemplate" [ngTemplateOutlet]="loadingSpinnerTemplate">
      </div>
    </span>
 </button>
</div>
