<div class="ng-data-table-wrapper" [ngClass]="{ 'scrollable': !!contentHeight }">
  <ng-data-table-header *ngIf="showHeader" [reloading]="reloading"  [columns]="columns" (reload)="onReload()"></ng-data-table-header>
  <div class="ng-data-table-inner-wrapper">
    <div class="ng-data-table-header-wrapper" [style.paddingRight]="headerPadding | px">
      <div class="ng-data-table-header" scrollElement [scrollPositionStream]="scrollPositionStream">
        <table class="ng-data-table" [style.width]="tableWidth | px" [style.minWidth]="minWidth | px">
          <colgroup ngDataTableColGroup [columns]="columns">
          </colgroup>
          <thead>
          <tr>
            <th *ngIf="config.expandableRows" class="ng-data-table-expand-column-header">
            </th>
            <th *ngIf="config.showIndexColumn" class="ng-data-table-index-column-header">
              <span [textContent]="indexColumnTitle"></span>
            </th>
            <th *ngIf="config.rowSelectable" class="ng-data-table-select-column-header">
              <input [hidden]="!multiRowSelectable" class="ng-data-table-checkbox-input" type="checkbox" [(ngModel)]="selectAllCheckbox"/>
            </th>
            <ng-container *ngFor="let column of columns">
              <th #th *ngIf="column.visible" (click)="headerClicked(column, $event)" (elementWidth)="onElementWidthInit($event, column)"
                  [class.sortable]="column.sortable" [class.resizable]="column.resizable" [ngClass]="column.styleClass" class="ng-data-table-column-header" >
                <span *ngIf="!column.headerTemplate" [textContent]="column.title"></span>
                <span *ngIf="column.headerTemplate" [ngTemplateOutlet]="column.headerTemplate" [ngTemplateOutletContext]="{column: column}"></span>
                <span class="ng-data-table-column-sort-icon" [hidden]="!column.sortable">
                  <i class="zmdi" [ngClass]="getSortIconClass(column)"></i>
                </span>
                <span *ngIf="column.resizable"  class="ng-data-table-column-resize-handle" (mousedown)="resizeColumnStart($event, column, th)"></span>
              </th>
            </ng-container>
          </tr>
          <tr *ngIf="hasFilterColumns()">
            <th *ngIf="config.expandableRows" class="ng-data-table-expand-column-header">
            </th>
            <th *ngIf="config.showIndexColumn" class="ng-data-table-index-column-header">
            </th>
            <th *ngIf="config.rowSelectable" class="ng-data-table-select-column-header">
            </th>
            <ng-container *ngFor="let column of columns">
              <th #th *ngIf="column.visible">
                <ng-container *ngIf="column.filterable">
                  <span *ngIf="column.filterTemplate" [ngTemplateOutlet]="column.filterTemplate" [ngTemplateOutletContext]="{ column: column, onFilter: customFilterEventEmitter }"></span>
                  <ng-container *ngIf="!column.filterTemplate">
                    <input *ngIf="!column.showDropdownFilter" type="text" #filterTextBox [(ngModel)]="column.filter" (keyup)="filterData($event)" [placeholder]="column.filterPlaceholder"/>
                    <ng-dropdown
                      *ngIf="column.showDropdownFilter"
                      [relativeParentElement]="config.relativeParentElement"
                      [items]="column.filterOptions"
                      [totalItemCount]="column.filterOptions.length"
                      [(ngModel)]="column.filter"

                      [menuPosition]="column.dropdownFilterMenuPosition"
                      [filterable]="column.dropdownFilterSearchable"
                      [filterDebounceTime]="column.dropdownFilterSearchDebounceTime"
                      [filterDebounce]="column.dropdownFilterSearchDebounce"
                      [multiSelectable]="column.dropdownFilterMultiSelectable"
                      [showSelectedOptionRemoveButton]="column.dropdownFilterShowSelectedOptionRemoveButton"
                      [showClearSelectionButton]="column.dropdownFilterShowClearSelectionButton"
                      [showSelectAll]="column.dropdownFilterShowSelectAll"
                      [wrapDisplaySelectLimit]="column.dropdownFilterWrapDisplaySelectLimit"
                      [groupByField]="column.dropdownFilterGroupByField"
                      [triggerChangeOncePerSelectAll]="column.dropdownFilterTriggerChangeOncePerSelectAll"
                      [menuHeight]="column.dropdownFilterMenuHeight"
                      [menuWidth]="column.dropdownFilterMenuWidth"

                      [triggerSelectChangeOnInit]="false"
                      (selectChange)="filterData()">
                    </ng-dropdown>
                  </ng-container>
                </ng-container>
              </th>
            </ng-container>
          </tr>
          </thead>
        </table>
      </div>
    </div>
    <div class="ng-data-table-content" (scrollPosition)="scrollPositionStream.next($event)" [style.height]="contentHeight | px" [style.minHeight]="minHeight | px">
      <div class="ng-data-table-loading-cover" [hidden]="!isLoading">
        <div class="ng-data-table-loading-animation"></div>
      </div>
      <table class="ng-data-table" [style.width]="tableWidth | px" [style.minWidth]="minWidth | px" [hidden]="isLoading">
        <colgroup ngDataTableColGroup [columns]="columns">
        </colgroup>
        <tbody ngDataTableBody [dataRows]="dataRows">
        </tbody>
      </table>
      <ng-container *ngIf="showNoDataOverlay">
        <div class="ng-data-table-no-records-message" *ngIf="config.translations.noDataMessageHeader && config.translations.noDataMessageBody">
          <h1>{{config.translations.noDataMessageHeader}}</h1>
          <h2>{{config.translations.noDataMessageBody}}</h2>
        </div>
        <ng-template *ngIf="noRecordsTemplate" [ngTemplateOutlet]="noRecordsTemplate"></ng-template>
      </ng-container>
    </div>
  </div>
  <ng-data-table-pagination *ngIf="pageable && itemCount"
                            [limit]="limit"
                            [offset]="offset"
                            [itemCount]="itemCount"
                            (limitChange)="onLimitChange($event)"
                            (offsetChange)="onOffsetChange($event)">
  </ng-data-table-pagination>
</div>
